angular.module("simplism",["ui.router"]),angular.module("simplism").config(["$provide","$stateProvider",function(e,s){e.decorator("inputDirective",["$delegate",function(e){var s=e[0];return angular.extend(s.link,{post:function(e,s,t,i){return s.on("compositionupdate",function(e){return s.triggerHandler("compositionend")})}}),e}]),e.decorator("uiSrefDirective",["$delegate","$parse",function(e,s){var t=e[0].link;return e[0].compile=function(e,s){return function(e,s,i,n,o){i.uiSref&&t(e,s,i,n,o)}},e}]),s.state("root",{"abstract":!0,url:"",template:"<ui-view></ui-view>",resolve:{init:["simplism",function(e){return e.promise}]}})}]),angular.module("simplism").provider("simplism",function(){this.initializer=null,this.setInitializer=function(e){this.initializer=e},this.$get=["$q","$injector",function(e,s){var t=e.defer(),i=this;return{promise:t.promise,run:function(){if(i.initializer){var e=s.invoke(i.initializer);e&&"function"==typeof e.then?e.then(function(){t.resolve()}):t.resolve()}return t.promise}}}]}),angular.module("simplism").run(["simplism","$rootScope","$compile","BlockUI",function(e,s,t,i){var n=$("<app-loading></app-loading>");t(n)(s),$("body").append(n),e.run().then(function(){n.on("transactionend.sd.init",function(){n.remove()})});var o=function(){var e=$("html"),s=$(window).outerWidth();768>s&&!e.hasClass("size-mobile")?(e.addClass("size-mobile"),e.removeClass("size-tablet"),e.removeClass("size-desktop"),e.removeClass("size-desktop-lg")):s>=768&&992>s&&!e.hasClass("size-tablet")?(e.removeClass("size-mobile"),e.addClass("size-tablet"),e.removeClass("size-desktop"),e.removeClass("size-desktop-lg")):s>=992&&1200>s&&!e.hasClass("size-desktop")?(e.removeClass("size-mobile"),e.removeClass("size-tablet"),e.addClass("size-desktop"),e.removeClass("size-desktop-lg")):s>=1200&&!e.hasClass("size-desktop-lg")&&(e.removeClass("size-mobile"),e.removeClass("size-tablet"),e.removeClass("size-desktop"),e.addClass("size-desktop-lg"))};o(),$(window).resize(function(e){o()}),s.$on("$viewContentLoading",function(){i.show()}),s.$on("$viewContentLoaded",function(){i.hide()})}]),angular.module("simplism").directive("sdAddressSearchModal",["$timeout",function(e){return{restrict:"E",template:'<sd-modal sd-open="sdOpen">   <div class="sd-modal-dialog" style="min-width: 350px;">       <div class="sd-modal-header">           <div class="pull-right">               <a class="sd-modal-header-btn sd-modal-header-btn-muted" ng-click="sdOpen = false"><i class="fa fa-times fa-fw"></i></a>           </div>           <h4 class="sd-modal-title">우편번호 주소검색</h4>       </div>       <div class="sd-note sd-note-info sd-note-inset">다음 주소검색 서비스를 사용합니다.</div>       <div class="sd-address-search-modal-content" ng-class="{hidden: sdLoading}">       </div>       <div class="sd-modal-body" ng-class="{hidden: !sdLoading}">           <i class="fa fa-circle-o-notch fa-spin"></i> 다음 주소 검색창을 준비하고 있습니다.       </div>   </div></sd-modal>',scope:{sdOpen:"=",sdResult:"=?",sdSearchText:"=?"},link:function(s,t,i){s.sdLoading=!1,s.$watch("sdOpen",function(i){var n=$(t).find(".sd-address-search-modal-content"),o=function(){daum.postcode.load(function(){var e=new daum.Postcode({height:"100%",width:"100%",theme:{bgColor:"#222",searchBgColor:"#222",contentBgColor:"#222",pageBgColor:"#222",textColor:"#eee",queryTextColor:"#eee",outlineColor:"#333"},oncomplete:function(e){s.sdResult={postcode:e.zonecode,address:e.address},s.sdOpen=!1,s.$apply()}});e.embed(n.get(0),{q:s.sdSearchText,autoClose:!1}),$(t).find("iframe").css("background","#222"),$(t).find("iframe").contents().find("*").css("background","#222"),$(t).find("iframe").contents().find("iframe").css("background","#222"),$(t).find("iframe").contents().find("iframe").contents().find("*").css("background","#222"),$(t).find("iframe").contents().find("iframe").load(function(){console.log("test"),s.sdLoading=!1,s.$apply()})})};i?(s.sdLoading=!0,e(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="http://dmaps.daum.net/map_js_init/postcode.v2.js?autoload=false",e.readyState?e.onreadystatechange=function(){"loaded"!=e.readyState&&"complete"!=e.readyState||(e.onreadystatechange=null,o())}:e.onload=function(){o()},document.getElementsByTagName("body")[0].appendChild(e)},300)):n.empty()})}}}]),angular.module("simplism").directive("sdCheckbox",["$parse",function(e){return{restrict:"E",template:'<label class="sd-checkbox {{sdInnerClass}}" tabindex="0"><input type="checkbox" ng-model="sdModel" ng-disabled="sdDisabled"/><span>{{sdText}}</span></label>',scope:{sdInnerClass:"@",sdText:"@",sdModel:"=?",sdDisabled:"=?",sdOneway:"=?"},link:function(e,s,t){$(s).find("label").on("keydown",function(s){32==s.which&&(e.sdModel=!e.sdModel,e.$apply())})}}}]),angular.module("simplism").directive("sdContainer",["$rootScope",function(e){return{restrict:"E",link:function(s,t,i){var n=$('<div class="sd-sidebar-backdrop"></div>');$(t).prepend(n),n.on("click",function(){$(t).removeClass("toggle")}),$(t).on("click","sd-container-toggler",function(){$(t).addClass("toggle")}),e.$on("$stateChangeStart",function(){$(t).removeClass("toggle")})}}}]),angular.module("simplism").directive("sdFill",["$timeout",function(e){return{restrict:"A",link:function(s,t,i){var n,o=function(){$(t).css({position:"",top:"",left:"",bottom:"",right:"","overflow-y":""}),$(t).get(0).offsetWidth=$(t).get(0).offsetWidth,$(t).css({position:"absolute",top:$(t).position().top,left:$(t).position().left,bottom:0,right:0,"overflow-y":"auto"})};$(window).resize(function(){n&&e.cancel(n),n=e(function(){o()},100)}),o()}}}]),angular.module("simplism").directive("sdFocusing",function(){return{restrict:"A",link:function(e,s,t){t.sdFocusing?e.$watch(t.sdFocusing,function(e){e&&($(s).get(0).focus(),"input"==$(s).get(0).tagName.toLowerCase()&&$(s).get(0).select())}):($(s).get(0).focus(),$(s).get(0).select())}}}),angular.module("simplism").directive("sdHljs",function(){return{restrict:"E",scope:{sdType:"@",sdModel:"="},template:'<pre><code class="{{sdType}}">{{sdModel}}</code></pre>',link:function(e,s,t){e.$watch("sdModel",function(e){hljs.highlightBlock($(s).children("pre").children("code").get(0))})}}}),angular.module("simplism").directive("sdModal",["$parse",function(e){return{restrict:"E",link:function(s,t,i){var n=$('<div class="sd-modal-backdrop"></div>');$(t).prepend(n),n.on("click",function(){s.$apply(function(){e(i.sdOpen).assign(s,!1)})});var o;s.$watch(i.sdOpen,function(e){e?(o=document.activeElement,o.blur(),$(t).addClass("open"),$("body, *[sd-fill]").addClass("disable-scroll")):(o&&o.focus(),$(t).removeClass("open"),$("body, *[sd-fill]").removeClass("disable-scroll"))})}}}]),angular.module("simplism").directive("sdScrollBottom",["$parse",function(e){return{restrict:"A",link:function(s,t,i){$(t).scroll(function(){$(t).scrollTop()+$(t).innerHeight()>=$(t)[0].scrollHeight&&e(i.sdScrollBottom)(s)})}}}]),angular.module("simplism").directive("sdSidebar",function(){return{restrict:"E",link:function(e,s,t){var i=function(e){e.addClass("sd-animate");var s=e.get(0).scrollHeight;e.css("height",s)},n=function(e){e.addClass("sd-animate"),e.css("height",0)};$(s).on("transitionend",function(e){var s=$(e.target);s.removeClass("sd-animate")}),$(s).on("click","sd-sidebar-menu-item > a",function(){var e=$(this).parent(),t=e.children("sd-sidebar-menu");if(t.length>0)if(e.hasClass("on")){var o=e.children("sd-sidebar-menu");o.length>0&&n(o);var a=e.find("sd-sidebar-menu-item.on");a.removeClass("on");var d=a.children("sd-sidebar-menu");d.length>0&&n(d),e.removeClass("on")}else $(s).find("sd-sidebar-menu-item.on").each(function(){if($(this).has(t).length<1){$(this).removeClass("on");var e=$(this).children("sd-sidebar-menu");e.length>0&&n(e)}}),e.addClass("on"),i(t)})}}}),angular.module("simplism").directive("sdTab",["$parse",function(e){return{restrict:"E",link:function(s,t,i){var n=$('<div class="sd-tab-selector"></div>');$(t).append(n),$(t).on("click","sd-tab-item",function(){var t=$(this);s.$apply(function(){var n=t.attr("sd-value"),o=angular.element(t).scope(),a=e(n)(o);e(i.sdModel).assign(s,a)})}),s.$watch(i.sdModel,function(s){if(s){var i=$(t).find("sd-tab-item");i.each(function(){var t=$(this),i=t.attr("sd-value"),o=angular.element(t).scope(),a=e(i)(o);a==s?(t.addClass("active"),n.css({top:t.outerHeight()-2,left:t.position().left,width:t.outerWidth()})):t.removeClass("active")})}else $(t).find("sd-tab-item").removeClass("active")})}}}]),angular.module("simplism").directive("sdTable",["$compile","$timeout",function(e,s){return{restrict:"E",link:function(t,i,n){var o=$(i).children("table").children("thead"),a=o.clone();e(a)(t),a.css("visibility","hidden");var d=$('<table class="sd-table-header"></table>');d.append(a),$(i).prepend(d);var l,r=function(){l&&s.cancel(l),l=s(function(){a.css("visibility","visible"),a.css({top:$(i).offset().top,left:$(i).offset().left,display:"block"});var e=o.find("th"),s=a.find("th");s.each(function(s){var t=$(e[s]).outerWidth();$(this).outerWidth(t)})},300)};$(window).resize(function(){r()}),$(document).on("transitionend",function(e){r()}),t.$watch(function(){r()}),r()}}}]),angular.module("simplism").directive("sdTableSort",["$parse",function(e){return{restrict:"A",link:function(s,t,i){$(t).on("click","*[sd-table-sort-field]",function(){var t=$(this).attr("sd-table-sort-field"),n=e(i.sdTableSort)(s),o=n.indexOf(t),a=n.indexOf("-"+t);o>-1?n[o]="-"+t:a>-1?n.remove(n[a]):(n.clear(),n.push(t)),s.$apply()}),s.$watchCollection(i.sdTableSort,function(e){if(e){var s=$(t).find("*[sd-table-sort-field]");s.removeClass("sd-table-sort-desc"),s.removeClass("sd-table-sort-asc");for(var i=0;i<e.length;i++){var n=e[i],o=n.replace("-",""),a=0==n.indexOf("-")?"desc":"asc",d=$(t).find('*[sd-table-sort-field="'+o+'"]');d.addClass("sd-table-sort-"+a)}}})}}}]),angular.module("simplism").directive("sdTextbox",function(){return{restrict:"E",template:'<input type="{{type ? type : \'text\'}}" class="form-control" placeholder="{{placeholder}}" ng-model="sdModel" sd-focusing="sdFocusing"><i ng-if="icon" class="fa fa-fw fa-{{icon}}"></i>',scope:{placeholder:"@?",sdModel:"=?",icon:"@?",type:"@?",sdFocusing:"=?"},link:function(e,s,t){}}}),angular.module("simplism").directive("sdTopMenu",["$parse",function(e){return{restrict:"E",link:function(s,t,i){$(t).on("transitionend.sd.topbar-menu",function(e){e.target==$(t).get(0)&&$(t).removeClass("sd-animate")});var n;s.$watch(i.sdOpen,function(o){if(o){var a=e(i.sdTop)(s);$(t).css("top",a),$(t).get(0).offsetWidth=$(t).get(0).offsetWidth,$(t).addClass("on sd-animate"),n=$('<div class="sd-top-menu-backdrop"></div>'),$(t).before(n),n.click(function(){e(i.sdOpen).assign(s,!1),s.$apply()})}else $(t).removeClass("on"),n&&n.remove()})}}}]),angular.module("simplism").directive("sdViewPager",["$parse",function(e){return{restrict:"E",link:function(s,t,i){s.$watch(i.sdModel,function(n){if(n){var o=$(t).find("sd-view-pager-item"),a=!1;o.each(function(){var s=$(this),t=s.attr("sd-value"),i=angular.element(s).scope(),o=e(t)(i);o==n?(s.addClass("open"),$("body, *[sd-fill]").addClass("disable-scroll"),s.get(0).offsetWidth=s.get(0).offsetWidth,s.removeClass("pos-left"),s.removeClass("pos-right"),a=!0):a?(s.removeClass("pos-left"),s.addClass("pos-right")):(s.removeClass("pos-right"),s.addClass("pos-left")),console.log(o,n,a)})}else{var d=$(t).find("sd-view-pager-item").first(),l=d.attr("sd-value"),r=angular.element(d).scope(),c=e(l)(r);e(i.sdModel).assign(s,c)}}),$(t).on("transitionend","sd-view-pager-item",function(){$(this).hasClass("open")&&($(this).hasClass("pos-left")||$(this).hasClass("pos-right"))&&($(this).removeClass("open"),$("body, *[sd-fill]").removeClass("disable-scroll"))})}}}]),angular.module("simplism").filter("query",function(){return function(e){return decodeURIComponent(querystring.stringify(e))}}),angular.module("simplism").provider("BlockUI",function(){var e=$("body"),s=$('<div class="sd-block-ui"></div>');s.append('<div class="sd-block-ui-backdrop"></div>'),e.append(s);var t=$('<div class="sd-block-ui-container"></div>');s.append(t);var i=$('<div class="sd-block-ui-shape"></div>');t.append(i),i.append('<svg class="circle" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></svg>'),i.append('<svg class="circle2" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></svg>');var n=null,o=$('<div class="sd-block-ui-content"></div>');t.append(o);var a=0;return{setIconHtml:function(e){n&&n.remove(),n=$(e),n.addClass("icon"),i.append(n)},$get:function(){return{show:function(e){a++,e?o.html(e):o.html(""),s.get(0).offsetWidth=s.get(0).offsetWidth,s.addClass("on sd-animate"),s.off("transitionend.sd.block-ui").on("transitionend.sd.block-ui",function(){$(this).removeClass("sd-animate")})},hide:function(){a--,1>a&&(s.addClass("sd-animate"),s.removeClass("on"),s.off("transitionend.sd.block-ui").on("transitionend.sd.block-ui",function(){s.removeClass("sd-animate")}))}}}}}),angular.module("simplism").service("MessageBox",["$q",function(e){var s=$("body"),t=$('<div class="sd-message-box"></div>').appendTo(s);this.show=function(s,i){var n=$.extend({isConfirm:!1,title:"알림",icon:"warning",type:"default",isAutoClose:!1},i),o=e.defer();t.empty(),t.attr("class",""),t.addClass("sd-message-box sd-message-box-"+n.type);var a=$('<div class="sd-message-box-backdrop"></div>').appendTo(t);n.isAutoClose&&a.click(function(){t.removeClass("on"),o.reject()});var d=$('<div class="sd-message-box-dialog"></div>').appendTo(t),l=$('<div class="sd-message-box-header"></div>').appendTo(d);l.append('<i class="fa fa-fw fa-'+n.icon+'"></i> &nbsp; '+n.title);var r=$('<div class="pre-wrap sd-message-box-content"></div>').appendTo(d);r.text(s);var c=$('<div class="sd-message-box-footer"></div>').appendTo(d);if(n.isConfirm){var u=$('<button type="button" class="btn btn-link"><i class="fa fa-times"></i> 취소</button>').appendTo(c);u.click(function(){t.addClass("sd-animate"),t.removeClass("on"),o.reject()})}var f=$('<button type="button" class="btn btn-primary"><i class="fa fa-check"></i> 확인</button>').appendTo(c);return f.click(function(){t.addClass("sd-animate"),t.removeClass("on"),o.resolve()}),t.get(0).offsetWidth=t.get(0).offsetWidth,t.addClass("on sd-animate"),t.on("transitionend",function(e){e.target==t.find(".sd-message-box-dialog").get(0)&&t.removeClass("sd-animate")}),o.promise}}]),angular.module("simplism").factory("toast",["$timeout",function(e){return function(s,t){var i=$.extend({type:"info"},t),n=$("body"),o=$('<div class="sd-toast sd-toast-'+i.type+'"><div class="pre-wrap sd-toast-block">'+s+"</div></div>").appendTo(n);o.get(0).offsetWidth=o.get(0).offsetWidth,o.addClass("on sd-animate"),o.on("transitionend.sd.toast",function(){o.removeClass("sd-animate"),o.hasClass("on")||o.remove()}),e(function(){o.addClass("sd-animate"),o.removeClass("on")},5e3)}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImRpcmVjdGl2ZXMvc2RBZGRyZXNzU2VhcmNoTW9kYWwuanMiLCJkaXJlY3RpdmVzL3NkQ2hlY2tib3guanMiLCJkaXJlY3RpdmVzL3NkQ29udGFpbmVyLmpzIiwiZGlyZWN0aXZlcy9zZEZpbGwuanMiLCJkaXJlY3RpdmVzL3NkRm9jdXNpbmcuanMiLCJkaXJlY3RpdmVzL3NkSGxqcy5qcyIsImRpcmVjdGl2ZXMvc2RNb2RhbC5qcyIsImRpcmVjdGl2ZXMvc2RTY3JvbGxCb3R0b20uanMiLCJkaXJlY3RpdmVzL3NkU2lkZWJhci5qcyIsImRpcmVjdGl2ZXMvc2RUYWIuanMiLCJkaXJlY3RpdmVzL3NkVGFibGUuanMiLCJkaXJlY3RpdmVzL3NkVGFibGVTb3J0LmpzIiwiZGlyZWN0aXZlcy9zZFRleHRib3guanMiLCJkaXJlY3RpdmVzL3NkVG9wTWVudS5qcyIsImRpcmVjdGl2ZXMvc2RWaWV3UGFnZXIuanMiLCJmaWx0ZXJzL3F1ZXJ5LmpzIiwic2VydmljZXMvQmxvY2tVSS5qcyIsInNlcnZpY2VzL01lc3NhZ2VCb3guanMiLCJzZXJ2aWNlcy90b2FzdC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHByb3ZpZGUiLCIkc3RhdGVQcm92aWRlciIsImRlY29yYXRvciIsIiRkZWxlZ2F0ZSIsImRpcmVjdGl2ZSIsImV4dGVuZCIsImxpbmsiLCJwb3N0Iiwic2NvcGUiLCJlbGVtZW50IiwiYXR0ciIsImN0cmxzIiwib24iLCJldmVudCIsInRyaWdnZXJIYW5kbGVyIiwiJHBhcnNlIiwicHJldkxpbmsiLCJjb21waWxlIiwiX2VsZW1lbnQiLCJfYXR0ciIsImN0cmwiLCJmbiIsInN0YXRlIiwiYWJzdHJhY3QiLCJ1cmwiLCJ0ZW1wbGF0ZSIsInJlc29sdmUiLCJpbml0Iiwic2ltcGxpc20iLCJwcm9taXNlIiwicHJvdmlkZXIiLCJ0aGlzIiwiaW5pdGlhbGl6ZXIiLCJzZXRJbml0aWFsaXplciIsImZ1bmMiLCIkZ2V0IiwiJHEiLCIkaW5qZWN0b3IiLCJkZWZlcnJlZCIsImRlZmVyIiwic2VsZiIsInJ1biIsInByb20iLCJpbnZva2UiLCJ0aGVuIiwiJHJvb3RTY29wZSIsIiRjb21waWxlIiwiQmxvY2tVSSIsIiRhcHBMb2FkaW5nIiwiJCIsImFwcGVuZCIsInJlbW92ZSIsInNpemluZyIsIiRodG1sIiwiY3VycldpZHRoIiwid2luZG93Iiwib3V0ZXJXaWR0aCIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInJlc2l6ZSIsImUiLCIkb24iLCJzaG93IiwiaGlkZSIsIiR0aW1lb3V0IiwicmVzdHJpY3QiLCJzZE9wZW4iLCJzZFJlc3VsdCIsInNkU2VhcmNoVGV4dCIsInNkTG9hZGluZyIsIiR3YXRjaCIsInZhbHVlIiwiJGNvbnRlbnQiLCJmaW5kIiwiZGF1bSIsInBvc3Rjb2RlIiwibG9hZCIsIlBvc3Rjb2RlIiwiaGVpZ2h0Iiwid2lkdGgiLCJ0aGVtZSIsImJnQ29sb3IiLCJzZWFyY2hCZ0NvbG9yIiwiY29udGVudEJnQ29sb3IiLCJwYWdlQmdDb2xvciIsInRleHRDb2xvciIsInF1ZXJ5VGV4dENvbG9yIiwib3V0bGluZUNvbG9yIiwib25jb21wbGV0ZSIsImRhdGEiLCJ6b25lY29kZSIsImFkZHJlc3MiLCIkYXBwbHkiLCJlbWJlZCIsImdldCIsInEiLCJhdXRvQ2xvc2UiLCJjc3MiLCJjb250ZW50cyIsImNvbnNvbGUiLCJsb2ciLCJzY3JpcHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiYXN5bmMiLCJzcmMiLCJyZWFkeVN0YXRlIiwib25yZWFkeXN0YXRlY2hhbmdlIiwib25sb2FkIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsImVtcHR5Iiwic2RJbm5lckNsYXNzIiwic2RUZXh0Iiwic2RNb2RlbCIsInNkRGlzYWJsZWQiLCJzZE9uZXdheSIsIndoaWNoIiwiJHNpZGViYXJCYWNrZHJvcCIsInByZXBlbmQiLCJ0aW1lb3V0Iiwic2V0dGluZyIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsImJvdHRvbSIsInJpZ2h0Iiwib3ZlcmZsb3cteSIsIm9mZnNldFdpZHRoIiwiY2FuY2VsIiwiZm9jdXMiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJzZWxlY3QiLCJzZFR5cGUiLCJobGpzIiwiaGlnaGxpZ2h0QmxvY2siLCJjaGlsZHJlbiIsIiRiYWNrZHJvcCIsImFzc2lnbiIsInByZXZGb2N1c2VkIiwiYWN0aXZlRWxlbWVudCIsImJsdXIiLCJzY3JvbGwiLCJzY3JvbGxUb3AiLCJpbm5lckhlaWdodCIsInNjcm9sbEhlaWdodCIsInNsaWRlRG93biIsIiRlbGVtIiwiZWxlbUhlaWdodCIsInNsaWRlVXAiLCIkdGFyZ2V0IiwidGFyZ2V0IiwiJGl0ZW0iLCJwYXJlbnQiLCIkY2hpbGRNZW51IiwibGVuZ3RoIiwiJGl0ZW1DaGlsZE1lbnUiLCIkY3Vyckl0ZW0iLCIkaXRlbXNJdGVtQ2hpbGRNZW51IiwiZWFjaCIsImhhcyIsIiR0aGlzQ2hpbGRNZW51IiwiJHNlbGVjdG9yIiwiaXRlbVZhbHVlQXR0ciIsIml0ZW1TY29wZSIsIml0ZW1WYWx1ZSIsIiRpdGVtcyIsIm91dGVySGVpZ2h0IiwiJHRoZWFkIiwiJGhlYWRlciIsImNsb25lIiwiJGhlYWRlclRhYmxlIiwiY29sdW1uU2l6aW5nIiwib2Zmc2V0IiwiZGlzcGxheSIsIiR0aGVhZENvbHVtbnMiLCIkaGVhZGVyQ29sdW1ucyIsImluZGV4Iiwib3JnV2lkdGgiLCJmaWVsZE5hbWUiLCJjdXJyZW50IiwiY3VycmVudEluZGV4IiwiaW5kZXhPZiIsImN1cnJlbnRJbmRleDIiLCJjbGVhciIsInB1c2giLCIkd2F0Y2hDb2xsZWN0aW9uIiwiJGZpZWxkcyIsImkiLCJpdGVtIiwicmVwbGFjZSIsIm9yZGVyVHlwZSIsIiRmaWVsZCIsInBsYWNlaG9sZGVyIiwiaWNvbiIsInNkRm9jdXNpbmciLCJiZWZvcmUiLCJjbGljayIsImlzUHJldlNlbGVjdGVkIiwiZmlyc3QiLCJmaWx0ZXIiLCJvYmoiLCJkZWNvZGVVUklDb21wb25lbnQiLCJxdWVyeXN0cmluZyIsInN0cmluZ2lmeSIsIiRib2R5IiwiJGJsb2NrVUkiLCIkY29udGFpbmVyIiwiJHNoYXBlIiwiJGljb24iLCJjb3VudCIsInNldEljb25IdG1sIiwiaHRtbCIsImNvbnRlbnQiLCJvZmYiLCJzZXJ2aWNlIiwiJG1lc3NhZ2VCb3giLCJhcHBlbmRUbyIsIm9wdGlvbiIsIm9wdCIsImlzQ29uZmlybSIsInRpdGxlIiwiaXNBdXRvQ2xvc2UiLCJyZWplY3QiLCIkZGlhbG9nIiwidGV4dCIsIiRmb290ZXIiLCIkY2FuY2VsQnV0dG9uIiwiJG9rQnV0dG9uIiwiZmFjdG9yeSIsIm9wdGlvbnMiLCJvcHRzIiwiJHRvYXN0Il0sIm1hcHBpbmdzIjoiQUFhQUEsUUFBQUMsT0FBQSxZQUFBLGNBRUFELFFBQUFDLE9BQUEsWUFBQUMsUUFBQSxXQUFBLGlCQUFBLFNBQUFDLEVBQUFDLEdBRUFELEVBQUFFLFVBQUEsa0JBQUEsWUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUEsRUFRQSxPQVBBTixTQUFBUSxPQUFBRCxFQUFBRSxNQUNBQyxLQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsTUFBQUYsR0FBQUcsR0FBQSxvQkFBQSxTQUFBQyxHQUNBLE1BQUFKLEdBQUFLLGVBQUEsdUJBSUFYLEtBSUFILEVBQUFFLFVBQUEsbUJBQUEsWUFBQSxTQUFBLFNBQUFDLEVBQUFZLEdBQ0EsR0FBQUMsR0FBQWIsRUFBQSxHQUFBRyxJQVNBLE9BUEFILEdBQUEsR0FBQWMsUUFBQSxTQUFBQyxFQUFBQyxHQUNBLE1BQUEsVUFBQVgsRUFBQUMsRUFBQUMsRUFBQVUsRUFBQUMsR0FDQVgsRUFBQSxRQUNBTSxFQUFBUixFQUFBQyxFQUFBQyxFQUFBVSxFQUFBQyxLQUlBbEIsS0FHQUYsRUFBQXFCLE1BQUEsUUFDQUMsWUFBQSxFQUNBQyxJQUFBLEdBQ0FDLFNBQUEsc0JBQ0FDLFNBQ0FDLE1BQUEsV0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFD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bWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBuZ2RvYyBtb2R1bGVcclxuICogQG5hbWUgc2ltcGxpc21cclxuICogQG1vZHVsZSBzaW1wbGlzbVxyXG4gKlxyXG4gKiBAcmVxdWlyZXMgdWkucm91dGVyXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiAjIHNpbXBsaXNtXHJcbiAqXHJcbiAqIOuplOyduCDrqqjrk4jsnoXri4jri6QuXHJcbiAqXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnc2ltcGxpc20nLCBbXCJ1aS5yb3V0ZXJcIl0pO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3NpbXBsaXNtJykuY29uZmlnKC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24oJHByb3ZpZGUsICRzdGF0ZVByb3ZpZGVyKXtcclxuICAgIC8vLS0g7ZWc6riA7J6F66Cl7KCB7Jqp7J20IOyViOuQmOuKlCDsmKTrpZgg7IiY7KCVXHJcbiAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJ2lucHV0RGlyZWN0aXZlJywgLypAbmdJbmplY3QqLyBmdW5jdGlvbigkZGVsZWdhdGUpe1xyXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSAkZGVsZWdhdGVbMF07XHJcbiAgICAgICAgYW5ndWxhci5leHRlbmQoZGlyZWN0aXZlLmxpbmssIHtcclxuICAgICAgICAgICAgcG9zdDogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5vbignY29tcG9zaXRpb251cGRhdGUnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnRyaWdnZXJIYW5kbGVyKCdjb21wb3NpdGlvbmVuZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gJGRlbGVnYXRlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8tLSB1aS1zcmVmIOu5iOy5uOydvOuVjCwg7Jik66WY6rCAIOuCmOyngCDslYrqs6Ag7J6R64+Z66eMIOyViOuQmOuPhOuhnVxyXG4gICAgJHByb3ZpZGUuZGVjb3JhdG9yKCd1aVNyZWZEaXJlY3RpdmUnLCBbJyRkZWxlZ2F0ZScsJyRwYXJzZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSwgJHBhcnNlKSB7XHJcbiAgICAgICAgdmFyIHByZXZMaW5rID0gJGRlbGVnYXRlWzBdLmxpbms7XHJcblxyXG4gICAgICAgICRkZWxlZ2F0ZVswXS5jb21waWxlID0gZnVuY3Rpb24gKF9lbGVtZW50LCBfYXR0cil7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgZm4pe1xyXG4gICAgICAgICAgICAgICAgaWYoYXR0clsndWlTcmVmJ10pe1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXZMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCBmbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gJGRlbGVnYXRlO1xyXG4gICAgfV0pO1xyXG5cclxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwicm9vdFwiLCB7XHJcbiAgICAgICAgYWJzdHJhY3Q6IHRydWUsXHJcbiAgICAgICAgdXJsOiBcIlwiLFxyXG4gICAgICAgIHRlbXBsYXRlOiBcIjx1aS12aWV3PjwvdWktdmlldz5cIixcclxuICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgIGluaXQ6IC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24oc2ltcGxpc20pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaW1wbGlzbS5wcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgc2ltcGxpc21Qcm92aWRlclxyXG4gKiBAcmVxdWlyZXMgbmcuJGluamVjdG9yXHJcbiAqIEByZXF1aXJlcyBuZy4kcVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKFwic2ltcGxpc21cIikucHJvdmlkZXIoJ3NpbXBsaXNtJywgZnVuY3Rpb24gKCl7XHJcbiAgICB0aGlzLmluaXRpYWxpemVyID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lIHNpbXBsaXNtUHJvdmlkZXIjc2V0SW5pdGlhbGl6ZXJcclxuICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiDtlITroZzqt7jrnqgg7LSI6riw7ZmUIO2VqOyImCDrk7HroZ1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gZnVuYyDstIjquLDtmZQg7ZWo7IiYLiDsnbQg7ZWo7IiY64qUIEluamVjdGlvbuuQmOyWtCDsgqzsmqnrkJjqs6AsIOydtCDtlajsiJjsl5DshJxcclxuICAgICAqICAgICAgPGNvZGU+UHJvbWlzZTwvY29kZT4g66W8IOumrO2EtO2VmOqyjCDtlZjrqbQsIFByb21pc2XqsIAg7KKF66OM65CcIO2bhOyXkCwg66Gc65Sp7J20IOuBneuCnOuLpC5cclxuICAgICAqL1xyXG4gICAgdGhpcy5zZXRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmdW5jKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplciA9IGZ1bmM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24oJHEsICRpbmplY3Rvcil7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb21pc2U6IGRlZmVycmVkLnByb21pc2UsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZihzZWxmLmluaXRpYWxpemVyKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbSA9ICRpbmplY3Rvci5pbnZva2Uoc2VsZi5pbml0aWFsaXplcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocHJvbSAmJiB0eXBlb2YgcHJvbS50aGVuID09ICdmdW5jdGlvbicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG59KTtcclxuXHJcbmFuZ3VsYXIubW9kdWxlKFwic2ltcGxpc21cIikucnVuKC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24oc2ltcGxpc20sICRyb290U2NvcGUsICRjb21waWxlLCBCbG9ja1VJKXtcclxuICAgIC8vLS0gQXBwIExvYWRpbmcg7J2EIOy8rFxyXG4gICAgdmFyICRhcHBMb2FkaW5nID0gJCgnPGFwcC1sb2FkaW5nPjwvYXBwLWxvYWRpbmc+Jyk7XHJcbiAgICAkY29tcGlsZSgkYXBwTG9hZGluZykoJHJvb3RTY29wZSk7XHJcbiAgICAkKCdib2R5JykuYXBwZW5kKCRhcHBMb2FkaW5nKTtcclxuXHJcbiAgICAvLy0tIEluaXTsmYTro4zsi5wgQXBwIExvYWRpbmfsnYQg64GUXHJcbiAgICBzaW1wbGlzbS5ydW4oKS50aGVuKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJGFwcExvYWRpbmcub24oJ3RyYW5zYWN0aW9uZW5kLnNkLmluaXQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkYXBwTG9hZGluZy5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vLS0gU2l6ZSBDbGFzc+ulvCBodG1s7JeQIOuEo+ydjFxyXG4gICAgdmFyIHNpemluZyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyICRodG1sID0gJCgnaHRtbCcpO1xyXG5cclxuICAgICAgICB2YXIgY3VycldpZHRoID0gJCh3aW5kb3cpLm91dGVyV2lkdGgoKTtcclxuICAgICAgICBpZihjdXJyV2lkdGggPCA3NjggJiYgISRodG1sLmhhc0NsYXNzKCdzaXplLW1vYmlsZScpKXtcclxuICAgICAgICAgICAgJGh0bWwuYWRkQ2xhc3MoJ3NpemUtbW9iaWxlJyk7XHJcbiAgICAgICAgICAgICRodG1sLnJlbW92ZUNsYXNzKCdzaXplLXRhYmxldCcpO1xyXG4gICAgICAgICAgICAkaHRtbC5yZW1vdmVDbGFzcygnc2l6ZS1kZXNrdG9wJyk7XHJcbiAgICAgICAgICAgICRodG1sLnJlbW92ZUNsYXNzKCdzaXplLWRlc2t0b3AtbGcnKTtcclxuXHJcbiAgICAgICAgfWVsc2UgaWYoY3VycldpZHRoID49IDc2OCAmJiBjdXJyV2lkdGggPCA5OTIgJiYgISRodG1sLmhhc0NsYXNzKCdzaXplLXRhYmxldCcpKXtcclxuICAgICAgICAgICAgJGh0bWwucmVtb3ZlQ2xhc3MoJ3NpemUtbW9iaWxlJyk7XHJcbiAgICAgICAgICAgICRodG1sLmFkZENsYXNzKCdzaXplLXRhYmxldCcpO1xyXG4gICAgICAgICAgICAkaHRtbC5yZW1vdmVDbGFzcygnc2l6ZS1kZXNrdG9wJyk7XHJcbiAgICAgICAgICAgICRodG1sLnJlbW92ZUNsYXNzKCdzaXplLWRlc2t0b3AtbGcnKTtcclxuXHJcbiAgICAgICAgfWVsc2UgaWYoY3VycldpZHRoID49IDk5MiAmJiBjdXJyV2lkdGggPCAxMjAwICYmICEkaHRtbC5oYXNDbGFzcygnc2l6ZS1kZXNrdG9wJykpe1xyXG4gICAgICAgICAgICAkaHRtbC5yZW1vdmVDbGFzcygnc2l6ZS1tb2JpbGUnKTtcclxuICAgICAgICAgICAgJGh0bWwucmVtb3ZlQ2xhc3MoJ3NpemUtdGFibGV0Jyk7XHJcbiAgICAgICAgICAgICRodG1sLmFkZENsYXNzKCdzaXplLWRlc2t0b3AnKTtcclxuICAgICAgICAgICAgJGh0bWwucmVtb3ZlQ2xhc3MoJ3NpemUtZGVza3RvcC1sZycpO1xyXG5cclxuICAgICAgICB9ZWxzZSBpZihjdXJyV2lkdGggPj0gMTIwMCAmJiAhJGh0bWwuaGFzQ2xhc3MoJ3NpemUtZGVza3RvcC1sZycpKXtcclxuICAgICAgICAgICAgJGh0bWwucmVtb3ZlQ2xhc3MoJ3NpemUtbW9iaWxlJyk7XHJcbiAgICAgICAgICAgICRodG1sLnJlbW92ZUNsYXNzKCdzaXplLXRhYmxldCcpO1xyXG4gICAgICAgICAgICAkaHRtbC5yZW1vdmVDbGFzcygnc2l6ZS1kZXNrdG9wJyk7XHJcbiAgICAgICAgICAgICRodG1sLmFkZENsYXNzKCdzaXplLWRlc2t0b3AtbGcnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgc2l6aW5nKCk7XHJcblxyXG4gICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbihlKXtcclxuICAgICAgICBzaXppbmcoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICRyb290U2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkaW5nJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBCbG9ja1VJLnNob3coKTtcclxuICAgIH0pO1xyXG4gICAgJHJvb3RTY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgQmxvY2tVSS5oaWRlKCk7XHJcbiAgICB9KTtcclxufSk7IiwiLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG1vZHVsZSBzaW1wbGlzbVxyXG4gKiBAbmFtZSBzZEFkZHJlc3NTZWFyY2hNb2RhbFxyXG4gKiBAcmVzdHJpY3QgRVxyXG4gKlxyXG4gKiBAcGFyYW0ge2Jvb2x9IHNkT3BlblxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IHNkUmVzdWx0XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZFNlYXJjaFRleHRcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnc2ltcGxpc20nKS5kaXJlY3RpdmUoJ3NkQWRkcmVzc1NlYXJjaE1vZGFsJywgLypAbmdJbmplY3QqLyBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICB0ZW1wbGF0ZTogJycgK1xyXG4gICAgICAgICc8c2QtbW9kYWwgc2Qtb3Blbj1cInNkT3BlblwiPicgK1xyXG4gICAgICAgICcgICA8ZGl2IGNsYXNzPVwic2QtbW9kYWwtZGlhbG9nXCIgc3R5bGU9XCJtaW4td2lkdGg6IDM1MHB4O1wiPicgK1xyXG4gICAgICAgICcgICAgICAgPGRpdiBjbGFzcz1cInNkLW1vZGFsLWhlYWRlclwiPicgK1xyXG4gICAgICAgICcgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwdWxsLXJpZ2h0XCI+JyArXHJcbiAgICAgICAgJyAgICAgICAgICAgICAgIDxhIGNsYXNzPVwic2QtbW9kYWwtaGVhZGVyLWJ0biBzZC1tb2RhbC1oZWFkZXItYnRuLW11dGVkXCIgbmctY2xpY2s9XCJzZE9wZW4gPSBmYWxzZVwiPjxpIGNsYXNzPVwiZmEgZmEtdGltZXMgZmEtZndcIj48L2k+PC9hPicgK1xyXG4gICAgICAgICcgICAgICAgICAgIDwvZGl2PicgK1xyXG4gICAgICAgICcgICAgICAgICAgIDxoNCBjbGFzcz1cInNkLW1vZGFsLXRpdGxlXCI+7Jqw7Y6467KI7Zi4IOyjvOyGjOqygOyDiTwvaDQ+JyArXHJcbiAgICAgICAgJyAgICAgICA8L2Rpdj4nICtcclxuICAgICAgICAnICAgICAgIDxkaXYgY2xhc3M9XCJzZC1ub3RlIHNkLW5vdGUtaW5mbyBzZC1ub3RlLWluc2V0XCI+64uk7J2MIOyjvOyGjOqygOyDiSDshJzruYTsiqTrpbwg7IKs7Jqp7ZWp64uI64ukLjwvZGl2PicgK1xyXG4gICAgICAgICcgICAgICAgPGRpdiBjbGFzcz1cInNkLWFkZHJlc3Mtc2VhcmNoLW1vZGFsLWNvbnRlbnRcIiBuZy1jbGFzcz1cIntoaWRkZW46IHNkTG9hZGluZ31cIj4nICtcclxuICAgICAgICAnICAgICAgIDwvZGl2PicgK1xyXG4gICAgICAgICcgICAgICAgPGRpdiBjbGFzcz1cInNkLW1vZGFsLWJvZHlcIiBuZy1jbGFzcz1cIntoaWRkZW46ICFzZExvYWRpbmd9XCI+JyArXHJcbiAgICAgICAgJyAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluXCI+PC9pPiDri6TsnYwg7KO87IaMIOqygOyDieywveydhCDspIDruYTtlZjqs6Ag7J6I7Iq164uI64ukLicgK1xyXG4gICAgICAgICcgICAgICAgPC9kaXY+JyArXHJcbiAgICAgICAgJyAgIDwvZGl2PicgK1xyXG4gICAgICAgICc8L3NkLW1vZGFsPicsXHJcbiAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgc2RPcGVuOiAnPScsXHJcbiAgICAgICAgICAgIHNkUmVzdWx0OiAnPT8nLFxyXG4gICAgICAgICAgICBzZFNlYXJjaFRleHQ6ICc9PydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKXtcclxuICAgICAgICAgICAgc2NvcGUuc2RMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goJ3NkT3BlbicsIGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgIHZhciAkY29udGVudCA9ICQoZWxlbWVudCkuZmluZCgnLnNkLWFkZHJlc3Mtc2VhcmNoLW1vZGFsLWNvbnRlbnQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF1bS5wb3N0Y29kZS5sb2FkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3N0Y29kZSA9IG5ldyBkYXVtLlBvc3Rjb2RlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJnQ29sb3I6IFwiIzIyMlwiLCAvL+uwlO2DlSDrsLDqsr3sg4lcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hCZ0NvbG9yOiBcIiMyMjJcIiwgLy/qsoDsg4nssL0g67Cw6rK97IOJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEJnQ29sb3I6IFwiIzIyMlwiLCAvL+uzuOusuCDrsLDqsr3sg4ko6rKA7IOJ6rKw6rO8LOqysOqzvOyXhuydjCzssqvtmZTrqbQs6rKA7IOJ7ISc7KCc7Iqk7Yq4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VCZ0NvbG9yOiBcIiMyMjJcIiwgLy/tjpjsnbTsp4Ag67Cw6rK97IOJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiBcIiNlZWVcIiwgLy/quLDrs7gg6riA7J6Q7IOJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlUZXh0Q29sb3I6IFwiI2VlZVwiLCAvL+qygOyDieywvSDquIDsnpDsg4lcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Bvc3Rjb2RlVGV4dENvbG9yOiBcIlwiLCAvL+yasO2OuOuyiO2YuCDquIDsnpDsg4lcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VtcGhUZXh0Q29sb3I6IFwiXCIsIC8v6rCV7KGwIOq4gOyekOyDiVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmVDb2xvcjogXCIjMzMzXCIgLy/thYzrkZDrpqxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNvbXBsZXRlOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6rKA7IOJ6rKw6rO8IO2VreuqqeydhCDtgbTrpq3tlojsnYTrlYwg7Iuk7ZaJ7ZWgIOy9lOuTnOulvCDsnpHshLHtlZjripQg67aA67aELlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnNkUmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0Y29kZTogZGF0YS56b25lY29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogZGF0YS5hZGRyZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zZE9wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Rjb2RlLmVtYmVkKCRjb250ZW50LmdldCgwKSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcTogc2NvcGUuc2RTZWFyY2hUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0Nsb3NlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vLS0g7LWc64yA7ZWcIOyViCDquZzruaHsnbTqsoxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5maW5kKCdpZnJhbWUnKS5jc3MoJ2JhY2tncm91bmQnLCAnIzIyMicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmZpbmQoJ2lmcmFtZScpLmNvbnRlbnRzKCkuZmluZCgnKicpLmNzcygnYmFja2dyb3VuZCcsICcjMjIyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuZmluZCgnaWZyYW1lJykuY29udGVudHMoKS5maW5kKCdpZnJhbWUnKS5jc3MoJ2JhY2tncm91bmQnLCAnIzIyMicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmZpbmQoJ2lmcmFtZScpLmNvbnRlbnRzKCkuZmluZCgnaWZyYW1lJykuY29udGVudHMoKS5maW5kKCcqJykuY3NzKCdiYWNrZ3JvdW5kJywgJyMyMjInKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuZmluZCgnaWZyYW1lJykuY29udGVudHMoKS5maW5kKCdpZnJhbWUnKS5sb2FkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGVzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2RMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5zZExvYWRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQuc3JjID0gJ2h0dHA6Ly9kbWFwcy5kYXVtLm5ldC9tYXBfanNfaW5pdC9wb3N0Y29kZS52Mi5qcz9hdXRvbG9hZD1mYWxzZSc7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2NyaXB0LnJlYWR5U3RhdGUpeyAvL0lFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSA9PSBcImxvYWRlZFwiIHx8IHNjcmlwdC5yZWFkeVN0YXRlID09IFwiY29tcGxldGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICRjb250ZW50LmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pOyIsIi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBtb2R1bGUgc2ltcGxpc21cclxuICogQG5hbWUgc2RDaGVja2JveFxyXG4gKiBAcmVzdHJpY3QgRVxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc2RJbm5lckNsYXNzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZFRleHRcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBzZE1vZGVsXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gc2REaXNhYmxlZFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdzaW1wbGlzbScpLmRpcmVjdGl2ZSgnc2RDaGVja2JveCcsIC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24gKCRwYXJzZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIHRlbXBsYXRlOiAnPGxhYmVsIGNsYXNzPVwic2QtY2hlY2tib3gge3tzZElubmVyQ2xhc3N9fVwiIHRhYmluZGV4PVwiMFwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInNkTW9kZWxcIiBuZy1kaXNhYmxlZD1cInNkRGlzYWJsZWRcIi8+PHNwYW4+e3tzZFRleHR9fTwvc3Bhbj48L2xhYmVsPicsXHJcbiAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgJ3NkSW5uZXJDbGFzcyc6IFwiQFwiLFxyXG4gICAgICAgICAgICAnc2RUZXh0JzogJ0AnLFxyXG4gICAgICAgICAgICAnc2RNb2RlbCc6ICc9PycsXHJcbiAgICAgICAgICAgICdzZERpc2FibGVkJzogJz0/JyxcclxuICAgICAgICAgICAgJ3NkT25ld2F5JzogJz0/J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuZmluZCgnbGFiZWwnKS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgaWYoZS53aGljaCA9PSAzMil7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2RNb2RlbCA9ICFzY29wZS5zZE1vZGVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KTsiLCIvKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbW9kdWxlIHNpbXBsaXNtXHJcbiAqIEBuYW1lIHNkQ29udGFpbmVyXHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ3NpbXBsaXNtJykuZGlyZWN0aXZlKCdzZENvbnRhaW5lcicsIC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgdmFyICRzaWRlYmFyQmFja2Ryb3AgPSAkKCc8ZGl2IGNsYXNzPVwic2Qtc2lkZWJhci1iYWNrZHJvcFwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLnByZXBlbmQoJHNpZGViYXJCYWNrZHJvcCk7XHJcbiAgICAgICAgICAgICRzaWRlYmFyQmFja2Ryb3Aub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ3RvZ2dsZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoZWxlbWVudCkub24oJ2NsaWNrJywgJ3NkLWNvbnRhaW5lci10b2dnbGVyJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoJ3RvZ2dsZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCd0b2dnbGUnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSk7IiwiLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG1vZHVsZSBzaW1wbGlzbVxyXG4gKiBAbmFtZSBzZEZpbGxcclxuICogQHJlc3RyaWN0IEFcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnc2ltcGxpc20nKS5kaXJlY3RpdmUoJ3NkRmlsbCcsIC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24gKCR0aW1lb3V0KSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICAgIHZhciBzZXR0aW5nID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBib3R0b206ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBcIm92ZXJmbG93LXlcIjogJydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJChlbGVtZW50KS5nZXQoMCkub2Zmc2V0V2lkdGggPSAkKGVsZW1lbnQpLmdldCgwKS5vZmZzZXRXaWR0aDsgLy9mb3JjZSBhIHJlcGFpbnRcclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6ICQoZWxlbWVudCkucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJChlbGVtZW50KS5wb3NpdGlvbigpLmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwib3ZlcmZsb3cteVwiOiAnYXV0bydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgdGltZW91dDtcclxuICAgICAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYodGltZW91dCkgJHRpbWVvdXQuY2FuY2VsKHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgdGltZW91dCA9ICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZygpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNldHRpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KTsiLCIvKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbW9kdWxlIHNpbXBsaXNtXHJcbiAqIEBuYW1lIHNkRm9jdXNpbmdcclxuICogQHJlc3RyaWN0IEFcclxuICpcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBzZEZvY3VzaW5nXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ3NpbXBsaXNtJykuZGlyZWN0aXZlKCdzZEZvY3VzaW5nJywgLypAbmdJbmplY3QqLyBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICAgIGlmKGF0dHJbJ3NkRm9jdXNpbmcnXSl7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0clsnc2RGb2N1c2luZyddLCBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmdldCgwKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkKGVsZW1lbnQpLmdldCgwKS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ2lucHV0Jyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmdldCgwKS5zZWxlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuZ2V0KDApLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmdldCgwKS5zZWxlY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pOyIsIi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBtb2R1bGUgc2ltcGxpc21cclxuICogQG5hbWUgc2RIbGpzXHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBwYXJhbSBzZFR5cGUge3N0cmluZ31cclxuICogQHBhcmFtIHNkTW9kZWwge2V4cHJlc3Npb259XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ3NpbXBsaXNtJykuZGlyZWN0aXZlKCdzZEhsanMnLCAvKkBuZ0luamVjdCovIGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICBzZFR5cGU6ICdAJyxcclxuICAgICAgICAgICAgc2RNb2RlbDogJz0nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZTogJzxwcmU+PGNvZGUgY2xhc3M9XCJ7e3NkVHlwZX19XCI+e3tzZE1vZGVsfX08L2NvZGU+PC9wcmU+JyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpe1xyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goJ3NkTW9kZWwnLCBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBobGpzLmhpZ2hsaWdodEJsb2NrKCQoZWxlbWVudCkuY2hpbGRyZW4oJ3ByZScpLmNoaWxkcmVuKCdjb2RlJykuZ2V0KDApKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KTsiLCIvKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbW9kdWxlIHNpbXBsaXNtXHJcbiAqIEBuYW1lIHNkTW9kYWxcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBzZE9wZW5cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnc2ltcGxpc20nKS5kaXJlY3RpdmUoJ3NkTW9kYWwnLCAvKkBuZ0luamVjdCovIGZ1bmN0aW9uICgkcGFyc2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgdmFyICRiYWNrZHJvcCA9ICQoJzxkaXYgY2xhc3M9XCJzZC1tb2RhbC1iYWNrZHJvcFwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLnByZXBlbmQoJGJhY2tkcm9wKTtcclxuICAgICAgICAgICAgJGJhY2tkcm9wLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAkcGFyc2UoYXR0clsnc2RPcGVuJ10pLmFzc2lnbihzY29wZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByZXZGb2N1c2VkO1xyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0clsnc2RPcGVuJ10sIGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2Rm9jdXNlZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkZvY3VzZWQuYmx1cigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmFkZENsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keSwgKltzZC1maWxsXScpLmFkZENsYXNzKCdkaXNhYmxlLXNjcm9sbCcpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocHJldkZvY3VzZWQpIHByZXZGb2N1c2VkLmZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdib2R5LCAqW3NkLWZpbGxdJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGUtc2Nyb2xsJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pOyIsIi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBtb2R1bGUgc2ltcGxpc21cclxuICogQG5hbWUgc2RTY3JvbGxCb3R0b21cclxuICogQHJlc3RyaWN0IEFcclxuICpcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBzZFNjcm9sbEJvdHRvbVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdzaW1wbGlzbScpLmRpcmVjdGl2ZSgnc2RTY3JvbGxCb3R0b20nLCAvKkBuZ0luamVjdCovIGZ1bmN0aW9uICgkcGFyc2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5zY3JvbGwoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmKCQoZWxlbWVudCkuc2Nyb2xsVG9wKCkgKyAkKGVsZW1lbnQpLmlubmVySGVpZ2h0KCk+PSQoZWxlbWVudClbMF0uc2Nyb2xsSGVpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICAkcGFyc2UoYXR0clsnc2RTY3JvbGxCb3R0b20nXSkoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KTsiLCIvKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbW9kdWxlIHNpbXBsaXNtXHJcbiAqIEBuYW1lIHNkU2lkZWJhclxyXG4gKiBAcmVzdHJpY3QgRVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdzaW1wbGlzbScpLmRpcmVjdGl2ZSgnc2RTaWRlYmFyJywgLypAbmdJbmplY3QqLyBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZURvd24gPSBmdW5jdGlvbigkZWxlbSl7XHJcbiAgICAgICAgICAgICAgICAkZWxlbS5hZGRDbGFzcygnc2QtYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1IZWlnaHQgPSAkZWxlbS5nZXQoMCkuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgJGVsZW0uY3NzKCdoZWlnaHQnLCBlbGVtSGVpZ2h0KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzbGlkZVVwID0gZnVuY3Rpb24oJGVsZW0pe1xyXG4gICAgICAgICAgICAgICAgJGVsZW0uYWRkQ2xhc3MoJ3NkLWFuaW1hdGUnKTtcclxuICAgICAgICAgICAgICAgICRlbGVtLmNzcygnaGVpZ2h0JywgMCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLm9uKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVDbGFzcygnc2QtYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoZWxlbWVudCkub24oJ2NsaWNrJywgJ3NkLXNpZGViYXItbWVudS1pdGVtID4gYScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgJGl0ZW0gPSAkKHRoaXMpLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyICRjaGlsZE1lbnUgPSAkaXRlbS5jaGlsZHJlbignc2Qtc2lkZWJhci1tZW51Jyk7XHJcbiAgICAgICAgICAgICAgICBpZigkY2hpbGRNZW51Lmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCRpdGVtLmhhc0NsYXNzKCdvbicpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtQ2hpbGRNZW51ID0gJGl0ZW0uY2hpbGRyZW4oJ3NkLXNpZGViYXItbWVudScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkaXRlbUNoaWxkTWVudS5sZW5ndGggPiAwKSBzbGlkZVVwKCRpdGVtQ2hpbGRNZW51KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY3Vyckl0ZW0gPSAkaXRlbS5maW5kKCdzZC1zaWRlYmFyLW1lbnUtaXRlbS5vbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY3Vyckl0ZW0ucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaXRlbXNJdGVtQ2hpbGRNZW51ID0gJGN1cnJJdGVtLmNoaWxkcmVuKCdzZC1zaWRlYmFyLW1lbnUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGl0ZW1zSXRlbUNoaWxkTWVudS5sZW5ndGggPiAwKSBzbGlkZVVwKCRpdGVtc0l0ZW1DaGlsZE1lbnUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuZmluZCgnc2Qtc2lkZWJhci1tZW51LWl0ZW0ub24nKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkKHRoaXMpLmhhcygkY2hpbGRNZW51KS5sZW5ndGggPCAxKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXNDaGlsZE1lbnUgPSAkKHRoaXMpLmNoaWxkcmVuKCdzZC1zaWRlYmFyLW1lbnUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkdGhpc0NoaWxkTWVudS5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVVcCgkdGhpc0NoaWxkTWVudSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlRG93bigkY2hpbGRNZW51KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pOyIsIi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBtb2R1bGUgc2ltcGxpc21cclxuICogQG5hbWUgc2RUYWJcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBzZE1vZGVsXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ3NpbXBsaXNtJykuZGlyZWN0aXZlKCdzZFRhYicsIC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24gKCRwYXJzZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgICB2YXIgJHNlbGVjdG9yID0gJCgnPGRpdiBjbGFzcz1cInNkLXRhYi1zZWxlY3RvclwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmFwcGVuZCgkc2VsZWN0b3IpO1xyXG5cclxuICAgICAgICAgICAgJChlbGVtZW50KS5vbignY2xpY2snLCAnc2QtdGFiLWl0ZW0nLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdmFyICRpdGVtID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbVZhbHVlQXR0ciA9ICRpdGVtLmF0dHIoJ3NkLXZhbHVlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1TY29wZSA9IGFuZ3VsYXIuZWxlbWVudCgkaXRlbSkuc2NvcGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1WYWx1ZSA9ICRwYXJzZShpdGVtVmFsdWVBdHRyKShpdGVtU2NvcGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkcGFyc2UoYXR0clsnc2RNb2RlbCddKS5hc3NpZ24oc2NvcGUsIGl0ZW1WYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0clsnc2RNb2RlbCddLCBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtcyA9ICQoZWxlbWVudCkuZmluZCgnc2QtdGFiLWl0ZW0nKTtcclxuICAgICAgICAgICAgICAgICAgICAkaXRlbXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1WYWx1ZUF0dHIgPSAkaXRlbS5hdHRyKCdzZC12YWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbVNjb3BlID0gYW5ndWxhci5lbGVtZW50KCRpdGVtKS5zY29wZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1WYWx1ZSA9ICRwYXJzZShpdGVtVmFsdWVBdHRyKShpdGVtU2NvcGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbVZhbHVlID09IHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3Rvci5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJGl0ZW0ub3V0ZXJIZWlnaHQoKSAtIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJGl0ZW0ucG9zaXRpb24oKS5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAkaXRlbS5vdXRlcldpZHRoKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmZpbmQoJ3NkLXRhYi1pdGVtJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KTtcclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG1vZHVsZSBzaW1wbGlzbVxyXG4gKiBAbmFtZSBzZFRhYkl0ZW1cclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBzZFZhbHVlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKi8iLCIvKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbW9kdWxlIHNpbXBsaXNtXHJcbiAqIEBuYW1lIHNkVGFibGVcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnc2ltcGxpc20nKS5kaXJlY3RpdmUoJ3NkVGFibGUnLCAvKkBuZ0luamVjdCovIGZ1bmN0aW9uICgkY29tcGlsZSwgJHRpbWVvdXQpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgdmFyICR0aGVhZCA9ICQoZWxlbWVudCkuY2hpbGRyZW4oJ3RhYmxlJykuY2hpbGRyZW4oJ3RoZWFkJyk7XHJcbiAgICAgICAgICAgIHZhciAkaGVhZGVyID0gJHRoZWFkLmNsb25lKCk7XHJcbiAgICAgICAgICAgICRjb21waWxlKCRoZWFkZXIpKHNjb3BlKTtcclxuICAgICAgICAgICAgJGhlYWRlci5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgJGhlYWRlclRhYmxlID0gJCgnPHRhYmxlIGNsYXNzPVwic2QtdGFibGUtaGVhZGVyXCI+PC90YWJsZT4nKTtcclxuICAgICAgICAgICAgJGhlYWRlclRhYmxlLmFwcGVuZCgkaGVhZGVyKTtcclxuXHJcbiAgICAgICAgICAgICQoZWxlbWVudCkucHJlcGVuZCgkaGVhZGVyVGFibGUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRpbWVvdXQ7XHJcbiAgICAgICAgICAgIHZhciBjb2x1bW5TaXppbmcgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYodGltZW91dCkgJHRpbWVvdXQuY2FuY2VsKHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgdGltZW91dCA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRoZWFkZXIuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJGhlYWRlci5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAkKGVsZW1lbnQpLm9mZnNldCgpLmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGVhZENvbHVtbnMgPSAkdGhlYWQuZmluZCgndGgnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJGhlYWRlckNvbHVtbnMgPSAkaGVhZGVyLmZpbmQoJ3RoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGhlYWRlckNvbHVtbnMuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZ1dpZHRoID0gJCgkdGhlYWRDb2x1bW5zW2luZGV4XSkub3V0ZXJXaWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLm91dGVyV2lkdGgob3JnV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGNvbHVtblNpemluZygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGNvbHVtblNpemluZygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5TaXppbmcoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbHVtblNpemluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pOyIsIi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBtb2R1bGUgc2ltcGxpc21cclxuICogQG5hbWUgc2RUYWJsZVNvcnRcclxuICogQHJlc3RyaWN0IEFcclxuICpcclxuICogQHBhcmFtIHNkVGFibGVTb3J0IHtleHByZXNzaW9ufVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdzaW1wbGlzbScpLmRpcmVjdGl2ZSgnc2RUYWJsZVNvcnQnLCAvKkBuZ0luamVjdCovIGZ1bmN0aW9uICgkcGFyc2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5vbignY2xpY2snLCAnKltzZC10YWJsZS1zb3J0LWZpZWxkXScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gJCh0aGlzKS5hdHRyKCdzZC10YWJsZS1zb3J0LWZpZWxkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAkcGFyc2UoYXR0clsnc2RUYWJsZVNvcnQnXSkoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IGN1cnJlbnQuaW5kZXhPZihmaWVsZE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleDIgPSBjdXJyZW50LmluZGV4T2YoJy0nICsgZmllbGROYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRJbmRleCA+IC0xKXtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50W2N1cnJlbnRJbmRleF0gPSAnLScgKyBmaWVsZE5hbWU7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihjdXJyZW50SW5kZXgyID4gLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQucmVtb3ZlKGN1cnJlbnRbY3VycmVudEluZGV4Ml0pO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudC5jbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQucHVzaChmaWVsZE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oYXR0clsnc2RUYWJsZVNvcnQnXSwgZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgaWYodmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciAkZmllbGRzID0gJChlbGVtZW50KS5maW5kKCcqW3NkLXRhYmxlLXNvcnQtZmllbGRdJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpZWxkcy5yZW1vdmVDbGFzcygnc2QtdGFibGUtc29ydC1kZXNjJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpZWxkcy5yZW1vdmVDbGFzcygnc2QtdGFibGUtc29ydC1hc2MnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCA7IGkgPCB2YWx1ZS5sZW5ndGggOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHZhbHVlW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gaXRlbS5yZXBsYWNlKCctJywgJycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyVHlwZSA9IGl0ZW0uaW5kZXhPZignLScpID09IDAgPyAnZGVzYyc6ICdhc2MnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRmaWVsZCA9ICQoZWxlbWVudCkuZmluZCgnKltzZC10YWJsZS1zb3J0LWZpZWxkPVwiJyArIGZpZWxkTmFtZSArICdcIl0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGZpZWxkLmFkZENsYXNzKCdzZC10YWJsZS1zb3J0LScgKyBvcmRlclR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSk7IiwiLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG1vZHVsZSBzaW1wbGlzbVxyXG4gKiBAbmFtZSBzZFRleHRib3hcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHBsYWNlaG9sZGVyXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gc2RNb2RlbFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaWNvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICovXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnc2ltcGxpc20nKS5kaXJlY3RpdmUoJ3NkVGV4dGJveCcsIC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIHRlbXBsYXRlOiAnPGlucHV0IHR5cGU9XCJ7e3R5cGUgPyB0eXBlIDogXFwndGV4dFxcJ319XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cInt7cGxhY2Vob2xkZXJ9fVwiIG5nLW1vZGVsPVwic2RNb2RlbFwiIHNkLWZvY3VzaW5nPVwic2RGb2N1c2luZ1wiPjxpIG5nLWlmPVwiaWNvblwiIGNsYXNzPVwiZmEgZmEtZncgZmEte3tpY29ufX1cIj48L2k+JyxcclxuICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0A/JyxcclxuICAgICAgICAgICAgc2RNb2RlbDogJz0/JyxcclxuICAgICAgICAgICAgaWNvbjogJ0A/JyxcclxuICAgICAgICAgICAgdHlwZTogJ0A/JyxcclxuICAgICAgICAgICAgc2RGb2N1c2luZzogJz0/J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTsiLCIvKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbW9kdWxlIHNpbXBsaXNtXHJcbiAqIEBuYW1lIHNkVG9wTWVudVxyXG4gKiBAcmVzdHJpY3QgRVxyXG4gKlxyXG4gKiBAcGFyYW0gc2RPcGVuIHtleHByZXNzaW9ufVxyXG4gKiBAcGFyYW0gc2RUb3Age2V4cHJlc3Npb259XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ3NpbXBsaXNtJykuZGlyZWN0aXZlKCdzZFRvcE1lbnUnLCAvKkBuZ0luamVjdCovIGZ1bmN0aW9uICgkcGFyc2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuXHJcbiAgICAgICAgICAgICQoZWxlbWVudCkub24oJ3RyYW5zaXRpb25lbmQuc2QudG9wYmFyLW1lbnUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGlmKGUudGFyZ2V0ID09ICQoZWxlbWVudCkuZ2V0KDApKXtcclxuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdzZC1hbmltYXRlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyICRiYWNrZHJvcDtcclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJbJ3NkT3BlbiddLCBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9ICRwYXJzZShhdHRyWydzZFRvcCddKShzY29wZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jc3MoJ3RvcCcsIHRvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5nZXQoMCkub2Zmc2V0V2lkdGggPSAkKGVsZW1lbnQpLmdldCgwKS5vZmZzZXRXaWR0aDsgLy9mb3JjZSBhIHJlcGFpbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoJ29uIHNkLWFuaW1hdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkYmFja2Ryb3AgPSAkKCc8ZGl2IGNsYXNzPVwic2QtdG9wLW1lbnUtYmFja2Ryb3BcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmJlZm9yZSgkYmFja2Ryb3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICRiYWNrZHJvcC5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcGFyc2UoYXR0clsnc2RPcGVuJ10pLmFzc2lnbihzY29wZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoJGJhY2tkcm9wKSAkYmFja2Ryb3AucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBtb2R1bGUgc2ltcGxpc21cclxuICogQG5hbWUgc2RWaWV3UGFnZXJcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBzZE1vZGVsXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ3NpbXBsaXNtJykuZGlyZWN0aXZlKCdzZFZpZXdQYWdlcicsIC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24gKCRwYXJzZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0clsnc2RNb2RlbCddLCBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtcyA9ICQoZWxlbWVudCkuZmluZCgnc2Qtdmlldy1wYWdlci1pdGVtJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc1ByZXZTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICRpdGVtcy5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaXRlbSA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtVmFsdWVBdHRyID0gJGl0ZW0uYXR0cignc2QtdmFsdWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1TY29wZSA9IGFuZ3VsYXIuZWxlbWVudCgkaXRlbSkuc2NvcGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtVmFsdWUgPSAkcGFyc2UoaXRlbVZhbHVlQXR0cikoaXRlbVNjb3BlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW1WYWx1ZSA9PSB2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaXRlbS5hZGRDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keSwgKltzZC1maWxsXScpLmFkZENsYXNzKCdkaXNhYmxlLXNjcm9sbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0uZ2V0KDApLm9mZnNldFdpZHRoID0gJGl0ZW0uZ2V0KDApLm9mZnNldFdpZHRoOyAvLyBmb3JjZSBhIHJlcGFpbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3Bvcy1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaXRlbS5yZW1vdmVDbGFzcygncG9zLXJpZ2h0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNQcmV2U2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpc1ByZXZTZWxlY3RlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3Bvcy1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3Bvcy1yaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3Bvcy1yaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtLmFkZENsYXNzKCdwb3MtbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW1WYWx1ZSwgdmFsdWUsIGlzUHJldlNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJGl0ZW0gPSAkKGVsZW1lbnQpLmZpbmQoJ3NkLXZpZXctcGFnZXItaXRlbScpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1WYWx1ZUF0dHIgPSAkaXRlbS5hdHRyKCdzZC12YWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtU2NvcGUgPSBhbmd1bGFyLmVsZW1lbnQoJGl0ZW0pLnNjb3BlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtVmFsdWUgPSAkcGFyc2UoaXRlbVZhbHVlQXR0cikoaXRlbVNjb3BlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHBhcnNlKGF0dHJbJ3NkTW9kZWwnXSkuYXNzaWduKHNjb3BlLCBpdGVtVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoZWxlbWVudCkub24oJ3RyYW5zaXRpb25lbmQnLCAnc2Qtdmlldy1wYWdlci1pdGVtJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmKCQodGhpcykuaGFzQ2xhc3MoJ29wZW4nKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcygncG9zLWxlZnQnKSB8fCAkKHRoaXMpLmhhc0NsYXNzKCdwb3MtcmlnaHQnKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keSwgKltzZC1maWxsXScpLnJlbW92ZUNsYXNzKCdkaXNhYmxlLXNjcm9sbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSk7XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBtb2R1bGUgc2ltcGxpc21cclxuICogQG5hbWUgc2RWaWV3UGFnZXJJdGVtXHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gc2RWYWx1ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICovIiwiYW5ndWxhci5tb2R1bGUoJ3NpbXBsaXNtJykuZmlsdGVyKCdxdWVyeScsIGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChxdWVyeXN0cmluZy5zdHJpbmdpZnkob2JqKSk7XHJcbiAgICB9O1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnc2ltcGxpc20nKS5wcm92aWRlcignQmxvY2tVSScsIGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgJGJvZHkgPSAkKCdib2R5Jyk7XHJcblxyXG4gICAgdmFyICRibG9ja1VJID0gJCgnPGRpdiBjbGFzcz1cInNkLWJsb2NrLXVpXCI+PC9kaXY+Jyk7XHJcbiAgICAkYmxvY2tVSS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzZC1ibG9jay11aS1iYWNrZHJvcFwiPjwvZGl2PicpO1xyXG5cclxuICAgICRib2R5LmFwcGVuZCgkYmxvY2tVSSk7XHJcblxyXG4gICAgdmFyICRjb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwic2QtYmxvY2stdWktY29udGFpbmVyXCI+PC9kaXY+Jyk7XHJcbiAgICAkYmxvY2tVSS5hcHBlbmQoJGNvbnRhaW5lcik7XHJcblxyXG4gICAgdmFyICRzaGFwZSA9ICQoJzxkaXYgY2xhc3M9XCJzZC1ibG9jay11aS1zaGFwZVwiPjwvZGl2PicpO1xyXG4gICAgJGNvbnRhaW5lci5hcHBlbmQoJHNoYXBlKTtcclxuXHJcbiAgICAkc2hhcGUuYXBwZW5kKCc8c3ZnIGNsYXNzPVwiY2lyY2xlXCIgdmlld0JveD1cIjI1IDI1IDUwIDUwXCI+PGNpcmNsZSBjbGFzcz1cInBhdGhcIiBjeD1cIjUwXCIgY3k9XCI1MFwiIHI9XCIyMFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1taXRlcmxpbWl0PVwiMTBcIi8+PC9zdmc+Jyk7XHJcbiAgICAkc2hhcGUuYXBwZW5kKCc8c3ZnIGNsYXNzPVwiY2lyY2xlMlwiIHZpZXdCb3g9XCIyNSAyNSA1MCA1MFwiPjxjaXJjbGUgY2xhc3M9XCJwYXRoXCIgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiMjBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbWl0ZXJsaW1pdD1cIjEwXCIvPjwvc3ZnPicpO1xyXG4gICAgLy8kc2hhcGUuYXBwZW5kKCc8c3ZnIGNsYXNzPVwiaWNvblwiIHg9XCIwcHhcIiB5PVwiMHB4XCIgd2lkdGg9XCIxMjhweFwiIGhlaWdodD1cIjEyOHB4XCIgdmlld0JveD1cIjAgMCAxMjggMTI4XCIgZW5hYmxlLWJhY2tncm91bmQ9XCJuZXcgMCAwIDEyOCAxMjhcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPjxnIGlkPVwi66CI7J207Ja0XzFcIj48cG9seWdvbiBmaWxsPVwiI0ZGRkZGRlwiIHBvaW50cz1cIjIwLjI1LDEyOCA2Ni41LDAgMTI4LDExNC4yNSAwLDYzLjYzNCAxMDEuNSw4OS43NSA2OC4yNSwzMyBcdFwiLz48L2c+PGcgaWQ9XCLroIjsnbTslrRfMlwiPjxjaXJjbGUgZmlsbD1cIiNGRkZGRkZcIiBjeD1cIjQyLjYzOVwiIGN5PVwiNzYuNDM2XCIgcj1cIjguNzk4XCIvPjwvZz48L3N2Zz4nKTtcclxuICAgIHZhciAkaWNvbiA9IG51bGw7XHJcblxyXG4gICAgdmFyICRjb250ZW50ID0gJCgnPGRpdiBjbGFzcz1cInNkLWJsb2NrLXVpLWNvbnRlbnRcIj48L2Rpdj4nKTtcclxuICAgICRjb250YWluZXIuYXBwZW5kKCRjb250ZW50KTtcclxuXHJcbiAgICB2YXIgY291bnQgPSAwO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2V0SWNvbkh0bWw6IGZ1bmN0aW9uKGh0bWwpe1xyXG4gICAgICAgICAgICBpZigkaWNvbikgJGljb24ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICRpY29uID0gJChodG1sKTtcclxuICAgICAgICAgICAgJGljb24uYWRkQ2xhc3MoJ2ljb24nKTtcclxuICAgICAgICAgICAgJHNoYXBlLmFwcGVuZCgkaWNvbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAkZ2V0OiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24oY29udGVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICBpZihjb250ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRlbnQuaHRtbChjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRlbnQuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkYmxvY2tVSS5nZXQoMCkub2Zmc2V0V2lkdGggPSAkYmxvY2tVSS5nZXQoMCkub2Zmc2V0V2lkdGg7IC8vZm9yY2UgYSByZXBhaW50O1xyXG4gICAgICAgICAgICAgICAgICAgICRibG9ja1VJLmFkZENsYXNzKCdvbiBzZC1hbmltYXRlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRibG9ja1VJLm9mZigndHJhbnNpdGlvbmVuZC5zZC5ibG9jay11aScpLm9uKCd0cmFuc2l0aW9uZW5kLnNkLmJsb2NrLXVpJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnc2QtYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQtLTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjb3VudCA8IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYmxvY2tVSS5hZGRDbGFzcygnc2QtYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYmxvY2tVSS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRibG9ja1VJLm9mZigndHJhbnNpdGlvbmVuZC5zZC5ibG9jay11aScpLm9uKCd0cmFuc2l0aW9uZW5kLnNkLmJsb2NrLXVpJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGJsb2NrVUkucmVtb3ZlQ2xhc3MoJ3NkLWFuaW1hdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJGJsb2NrVUkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnc2ltcGxpc20nKS5zZXJ2aWNlKCdNZXNzYWdlQm94JywgZnVuY3Rpb24oJHEpe1xyXG4gICAgdmFyICRib2R5ID0gJCgnYm9keScpO1xyXG4gICAgdmFyICRtZXNzYWdlQm94ID0gJCgnPGRpdiBjbGFzcz1cInNkLW1lc3NhZ2UtYm94XCI+PC9kaXY+JykuYXBwZW5kVG8oJGJvZHkpO1xyXG5cclxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKGNvbnRlbnQsIG9wdGlvbikge1xyXG4gICAgICAgIHZhciBvcHQgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgIGlzQ29uZmlybTogZmFsc2UsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIuyVjOumvFwiLFxyXG4gICAgICAgICAgICBpY29uOiBcIndhcm5pbmdcIixcclxuICAgICAgICAgICAgdHlwZTogXCJkZWZhdWx0XCIsXHJcbiAgICAgICAgICAgIGlzQXV0b0Nsb3NlOiBmYWxzZVxyXG4gICAgICAgIH0sIG9wdGlvbik7XHJcblxyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgIC8vLS0gTWVzc2FnZUJveCDstIjquLDtmZRcclxuICAgICAgICAkbWVzc2FnZUJveC5lbXB0eSgpO1xyXG5cclxuICAgICAgICAvLy0tIE1lc3NhZ2VCb3gg7YG0656Y7IqkIOyngOyglVxyXG4gICAgICAgICRtZXNzYWdlQm94LmF0dHIoJ2NsYXNzJywgJycpO1xyXG4gICAgICAgICRtZXNzYWdlQm94LmFkZENsYXNzKCdzZC1tZXNzYWdlLWJveCBzZC1tZXNzYWdlLWJveC0nICsgb3B0LnR5cGUpO1xyXG5cclxuICAgICAgICAvLy0tIE1lc3NhZ2VCb3guQmFja2Ryb3Ag64Sj6riwXHJcbiAgICAgICAgdmFyICRiYWNrZHJvcCA9ICQoJzxkaXYgY2xhc3M9XCJzZC1tZXNzYWdlLWJveC1iYWNrZHJvcFwiPjwvZGl2PicpLmFwcGVuZFRvKCRtZXNzYWdlQm94KTtcclxuICAgICAgICBpZiAob3B0LmlzQXV0b0Nsb3NlKSB7XHJcbiAgICAgICAgICAgICRiYWNrZHJvcC5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkbWVzc2FnZUJveC5yZW1vdmVDbGFzcygnb24nKTtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLS0gTWVzc2FnZUJveC5EaWFsb2cg64Sj6riwXHJcbiAgICAgICAgdmFyICRkaWFsb2cgPSAkKCc8ZGl2IGNsYXNzPVwic2QtbWVzc2FnZS1ib3gtZGlhbG9nXCI+PC9kaXY+JykuYXBwZW5kVG8oJG1lc3NhZ2VCb3gpO1xyXG5cclxuICAgICAgICAvLy0tIE1lc3NhZ2VCb3guRGlhbG9nLkhlYWRlciDrhKPquLBcclxuICAgICAgICB2YXIgJGhlYWRlciA9ICQoJzxkaXYgY2xhc3M9XCJzZC1tZXNzYWdlLWJveC1oZWFkZXJcIj48L2Rpdj4nKS5hcHBlbmRUbygkZGlhbG9nKTtcclxuICAgICAgICAkaGVhZGVyLmFwcGVuZCgnPGkgY2xhc3M9XCJmYSBmYS1mdyBmYS0nICsgb3B0Lmljb24gKyAnXCI+PC9pPiAmbmJzcDsgJyArIG9wdC50aXRsZSk7XHJcblxyXG4gICAgICAgIC8vLS0gTWVzc2FnZUJveC5EaWFsb2cuQ29udGVudCDrhKPquLBcclxuICAgICAgICB2YXIgJGNvbnRlbnQgPSAkKCc8ZGl2IGNsYXNzPVwicHJlLXdyYXAgc2QtbWVzc2FnZS1ib3gtY29udGVudFwiPjwvZGl2PicpLmFwcGVuZFRvKCRkaWFsb2cpO1xyXG4gICAgICAgICRjb250ZW50LnRleHQoY29udGVudCk7XHJcblxyXG4gICAgICAgIC8vLS0gTWVzc2FnZUJveC5EaWFsb2cuRm9vdGVyIOuEo+q4sFxyXG4gICAgICAgIHZhciAkZm9vdGVyID0gJCgnPGRpdiBjbGFzcz1cInNkLW1lc3NhZ2UtYm94LWZvb3RlclwiPjwvZGl2PicpLmFwcGVuZFRvKCRkaWFsb2cpO1xyXG4gICAgICAgIGlmIChvcHQuaXNDb25maXJtKSB7XHJcbiAgICAgICAgICAgIC8vLS0gTWVzc2FnZUJveC5EaWFsb2cuRm9vdGVyLkNhbmNlbEJ1dHRvbiDrhKPquLBcclxuICAgICAgICAgICAgdmFyICRjYW5jZWxCdXR0b24gPSAkKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tbGlua1wiPjxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIj48L2k+IOy3qOyGjDwvYnV0dG9uPicpLmFwcGVuZFRvKCRmb290ZXIpO1xyXG4gICAgICAgICAgICAkY2FuY2VsQnV0dG9uLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRtZXNzYWdlQm94LmFkZENsYXNzKCdzZC1hbmltYXRlJyk7XHJcbiAgICAgICAgICAgICAgICAkbWVzc2FnZUJveC5yZW1vdmVDbGFzcygnb24nKTtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLS0gTWVzc2FnZUJveC5EaWFsb2cuRm9vdGVyLk9rQnV0dG9uIOuEo+q4sFxyXG4gICAgICAgIHZhciAkb2tCdXR0b24gPSAkKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPjxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIj48L2k+IO2ZleyduDwvYnV0dG9uPicpLmFwcGVuZFRvKCRmb290ZXIpO1xyXG4gICAgICAgICRva0J1dHRvbi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtZXNzYWdlQm94LmFkZENsYXNzKCdzZC1hbmltYXRlJyk7XHJcbiAgICAgICAgICAgICRtZXNzYWdlQm94LnJlbW92ZUNsYXNzKCdvbicpO1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRtZXNzYWdlQm94LmdldCgwKS5vZmZzZXRXaWR0aCA9ICRtZXNzYWdlQm94LmdldCgwKS5vZmZzZXRXaWR0aDsgLy9mb3JjZSBhIHJlcGFpbnQ7XHJcbiAgICAgICAgJG1lc3NhZ2VCb3guYWRkQ2xhc3MoJ29uIHNkLWFuaW1hdGUnKTtcclxuXHJcbiAgICAgICAgJG1lc3NhZ2VCb3gub24oJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgPT0gJG1lc3NhZ2VCb3guZmluZCgnLnNkLW1lc3NhZ2UtYm94LWRpYWxvZycpLmdldCgwKSkge1xyXG4gICAgICAgICAgICAgICAgJG1lc3NhZ2VCb3gucmVtb3ZlQ2xhc3MoJ3NkLWFuaW1hdGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH07XHJcbn0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnc2ltcGxpc20nKS5mYWN0b3J5KCd0b2FzdCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcclxuICAgIHJldHVybiBmdW5jdGlvbihjb250ZW50LCBvcHRpb25zKXtcclxuICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgdHlwZTogJ2luZm8nXHJcbiAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHZhciAkYm9keSA9ICQoJ2JvZHknKTtcclxuICAgICAgICB2YXIgJHRvYXN0ID0gJCgnPGRpdiBjbGFzcz1cInNkLXRvYXN0IHNkLXRvYXN0LScgKyBvcHRzLnR5cGUgKyAnXCI+PGRpdiBjbGFzcz1cInByZS13cmFwIHNkLXRvYXN0LWJsb2NrXCI+JyArIGNvbnRlbnQgKyAnPC9kaXY+PC9kaXY+JykuYXBwZW5kVG8oJGJvZHkpO1xyXG4gICAgICAgICR0b2FzdC5nZXQoMCkub2Zmc2V0V2lkdGggPSAkdG9hc3QuZ2V0KDApLm9mZnNldFdpZHRoOyAvL2ZvcmNlIGEgcmVwYWludDtcclxuICAgICAgICAkdG9hc3QuYWRkQ2xhc3MoJ29uIHNkLWFuaW1hdGUnKTtcclxuXHJcbiAgICAgICAgJHRvYXN0Lm9uKCd0cmFuc2l0aW9uZW5kLnNkLnRvYXN0JywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJHRvYXN0LnJlbW92ZUNsYXNzKCdzZC1hbmltYXRlJyk7XHJcbiAgICAgICAgICAgIGlmKCEkdG9hc3QuaGFzQ2xhc3MoJ29uJykpe1xyXG4gICAgICAgICAgICAgICAgJHRvYXN0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICR0b2FzdC5hZGRDbGFzcygnc2QtYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICAkdG9hc3QucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgfSwgNTAwMCk7XHJcbiAgICB9XHJcbn0pOyJdfQ==
